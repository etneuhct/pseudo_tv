üìÑ Sp√©cification pour la g√©n√©ration de cha√Ænes t√©l√©

1. Structure globale du catalogue
---------------------------------
{
  "name": "nom_catalogue",
  "step": 0,
  "channels": [ ... ]
}
- name : Nom du catalogue.
- step : √âtape de g√©n√©ration (0 = initialisation).
- channels : Liste des cha√Ænes.

2. Structure d'une cha√Æne (Channel)
-----------------------------------
{
  "name": "nom_chaine",
  "description": "description courte",
  "begin": 6.0,
  "end": 24.0,
  "fillers": ["genre_normalis√©1", "genre_normalis√©2"],
  "blocks": [ ... ]
}
- name : Nom de la cha√Æne.
- description : Texte libre (non utilis√© pour la g√©n√©ration, mais utile plus tard).
- begin / end : Heure de d√©but et fin de diffusion (float, ex: 6.0 = 06:00). Peut varier selon la cha√Æne.
- fillers : Liste de genres normalis√©s (voir ¬ß7).
- blocks : Liste des blocs horaires.

3. Structure d‚Äôun bloc horaire (ChannelBlock)
---------------------------------------------
{
  "criteria": [ ... ],
  "begin": 8.0,
  "end": 9.5,
  "slot_count": 3,
  "slot_format": { "show_min_duration": 22, "show_max_duration": 26, "slot_duration": 30 },
  "shows": []
}
Obligations :
1. Dur√©e du bloc = (slot_duration * slot_count) / 60 heures.
2. slot_count ‚àà {1, 2} (jamais plus de 2).
3. slot_format doit √™tre un des formats autoris√©s (voir ¬ß5).
4. criteria obligatoire, au moins un.
5. shows : liste vide ou remplie plus tard.
6. Les horaires doivent se suivre sans chevauchement (trous possibles).

4. Structure d‚Äôun crit√®re (Criteria)
------------------------------------
{
  "category": "genre",
  "values": ["Action", "Science-Fiction"],
  "forbidden": false
}
- category ‚àà {"genre", "type", "language", "duration"}.
- Cumul entre crit√®res = ET.
- √Ä l‚Äôint√©rieur de values = OU.
- Crit√®re n√©gatif : "forbidden": true ‚Üí exclut ces valeurs.

5. Formats autoris√©s pour slot_format
-------------------------------------
| Dur√©e √©mission | Min (min) | Max (min) | Slot (min) | Utilisation |
| 22‚Äì26 min      | 22        | 26        | 30         | Sitcoms, courts magazines |
| 45‚Äì52 min      | 45        | 52        | 60         | S√©ries, documentaires |
| 70‚Äì80 min      | 70        | 80        | 90         | T√©l√©films, unitaires |
| 95‚Äì110 min     | 95        | 110       | 120        | Films du soir |
| 12‚Äì13 min      | 12        | 13        | 15         | Pastilles courtes |

6. Valeurs autoris√©es pour type
-------------------------------
- "series"
- "movie"

7. Genres normalis√©s
--------------------
{
  "Podcast": ["Podcast"],
  "Animation": ["Animation", "Anime"],
  "Science-Fiction": ["Science-Fiction", "Science Fiction", "Science-Fiction & Fantastique"],
  "Fantastique": ["Fantastique", "Fantasy", "Science-Fiction & Fantastique"],
  "Family": ["Family", "Familial", "Children"],
  "Horror": ["Horror", "Horreur"],
  "Mini-Series": ["Mini-Series"],
  "Documentaire": ["Documentaire", "Vulgarisation"],
  "Histoire": ["Histoire", "History"],
  "Action": ["Action", "Action & Adventure"],
  "Aventure": ["Aventure", "Adventure", "Action & Adventure"],
  "Crime": ["Crime"],
  "War & Politics": ["War & Politics", "Guerre"],
  "Talk Show": ["Talk Show"],
  "Com√©die": ["Com√©die", "Comedy"],
  "Jeux t√©l√©": ["Jeux t√©l√©"],
  "Sport": ["Sport"],
  "Western": ["Western"],
  "Drame": ["Drame", "Drama"],
  "Martial Arts": ["Martial Arts"],
  "Suspense": ["Suspense", "Thriller"],
  "Mystery": ["Mystery", "Myst√®re"],
  "Romance": ["Romance"],
  "YouTube": ["YouTube"]
}

8. R√®gles de construction
--------------------------
1. Alternance des shows : √©viter plus de 2‚Äì3 √©pisodes cons√©cutifs de la m√™me s√©rie.
2. Blocs film + s√©rie : autoris√©s, d√©pend de la demande.
3. Couverture horaire : pas forc√©ment 24h/24, peut √™tre partiel.
4. Crit√®res n√©gatifs possibles (exclure un genre).
5. Filtrage = cumulatif (ET entre crit√®res, OU √† l‚Äôint√©rieur de values).

9. Exemple minimal de bloc valide
----------------------------------
{
  "criteria": [
    { "category": "genre", "values": ["Suspense"], "forbidden": false },
    { "category": "type", "values": ["series"], "forbidden": false }
  ],
  "begin": 20.0,
  "end": 22.0,
  "slot_count": 2,
  "slot_format": { "show_min_duration": 45, "show_max_duration": 52, "slot_duration": 60 },
  "shows": []
}

10. Exemple de cha√Æne compl√®te
------------------------------
{
  "name": "Thriller Night",
  "description": "S√©ries et films √† suspense toute la soir√©e.",
  "begin": 18.0,
  "end": 24.0,
  "fillers": ["Suspense"],
  "blocks": [
    {
      "criteria": [
        { "category": "genre", "values": ["Suspense"], "forbidden": false },
        { "category": "type", "values": ["series"], "forbidden": false }
      ],
      "begin": 18.0,
      "end": 21.0,
      "slot_count": 3,
      "slot_format": { "show_min_duration": 45, "show_max_duration": 52, "slot_duration": 60 },
      "shows": []
    },
    {
      "criteria": [
        { "category": "genre", "values": ["Suspense"], "forbidden": false },
        { "category": "type", "values": ["movie"], "forbidden": false }
      ],
      "begin": 21.0,
      "end": 23.0,
      "slot_count": 1,
      "slot_format": { "show_min_duration": 95, "show_max_duration": 110, "slot_duration": 120 },
      "shows": []
    }
  ]
}


11. R√®gle d‚Äôhomog√©n√©it√© des blocs
---------------------------------
- Un bloc est homog√®ne :
  - Tous les shows d‚Äôun bloc respectent les m√™mes crit√®res (genre, type, etc.).
  - Si possible, tous les shows d‚Äôun bloc proviennent de la m√™me s√©rie.
    Exemple : un bloc slot_count: 3 avec type: series diffusera 3 √©pisodes cons√©cutifs de la m√™me s√©rie si disponible.
- Si le catalogue ne contient pas assez d‚Äô√©pisodes d‚Äôune m√™me s√©rie :
  - On compl√®te avec une autre s√©rie compatible avec les crit√®res du bloc.
- Astuce de d√©coupage :
  - Plut√¥t qu‚Äôun bloc de 3 √©pisodes de 3 s√©ries diff√©rentes, on peut cr√©er 3 blocs s√©par√©s de slot_count: 1 chacun.
  - Exemple : au lieu d‚Äôun bloc slot_count: 3 avec 3 films ‚Üí cr√©er 3 blocs d‚Äô1 film (slot_count: 1) cons√©cutifs.


12. R√®gle d'absence de trous
----------------------------
- La programmation d'une cha√Æne doit couvrir en continu la plage horaire d√©finie par begin et end.
- Exemple : si begin = 6.0 et end = 18.0, tous les blocs doivent s'encha√Æner sans interruption entre 6h00 et 18h00.
- Les horaires de fin d‚Äôun bloc doivent correspondre exactement √† l‚Äôhoraire de d√©but du bloc suivant.
- Aucune minute non programm√©e n'est autoris√©e dans l‚Äôintervalle de diffusion.


13. G√©n√©ration des watermarks / logos de cha√Æne
-----------------------------------------------
Objectif
- Pour chaque cha√Æne du catalogue (`channels`), g√©n√©rer un visuel **PNG avec transparence** (type logo/watermark) servant √† la fois d‚Äôidentifiant de marque et de visuel de repr√©sentation antenne.

Contraintes de conception
1. Le visuel doit √™tre **plus qu‚Äôun simple texte en SVG** : int√©grer un symbole, pictogramme, forme ou composition graphique en lien avec le **nom**, la **description** et l‚Äô**esprit** de la cha√Æne.
2. Style lisible et m√©morisable : privil√©gier des formes nettes, contrastes clairs, √©viter les d√©tails trop fins.
3. Couleurs libres, mais pr√©voir une **bonne visibilit√© sur fond clair et sombre** (utiliser transparence du fond et, si n√©cessaire, un l√©ger contour/ombre interne).
4. **Fond transparent obligatoire** (canal alpha), pas d‚Äôaplat blanc ou de couleur unie en arri√®re-plan.
5. Format recommand√© : **PNG** (RGBA). Ratio libre (carr√© recommand√©). Dimensions libres (pr√©voir une taille suffisante pour la d√©clinaison multi-supports).

Nommage des fichiers
- **Base du nom = `name` de la cha√Æne**, sensible √† la casse.
- **Extension `.png` obligatoire**.
- Exemple : pour `"Channel1"` ‚Üí fichier : `Channel1.png`.

Production attendue
- Un fichier PNG par cha√Æne, g√©n√©r√© √† partir de sa fiche (`name`, `description`, etc.).
- Le watermark doit rester lisible en petite taille (favicon/EPG) et suffisamment d√©taill√© pour un usage √©cran (carte cha√Æne, vignette).

Validation technique
- Chaque image :
  - Format : **PNG**
  - **Transparence** : canal alpha pr√©sent
  - Int√©grit√© : fichier ouvrable (pas corrompu)

Export et livraison
- **Inclure tous les PNG g√©n√©r√©s dans l‚Äôarchive finale** (voir ¬ß ‚ÄúTa t√¢che‚Äù mis √† jour ci-dessous).
- Arborescence simple √† la racine, par exemple :
  /
  ‚îú‚îÄ catalogue.json
  ‚îú‚îÄ ChannelA.png
  ‚îú‚îÄ ChannelB.png
  ‚îî‚îÄ ...


Ta t√¢che :
G√©n√®re un unique objet JSON de type Channel respectant toutes les r√®gles ci-dessus. N‚Äôinclus rien d‚Äôautre que le JSON brut, sans commentaire, sans introduction.
Valide que le .json g√©n√©r√© est un fichier .json valide
Extrais les fichiers ainsi g√©n√©r√© dans une archive zip.